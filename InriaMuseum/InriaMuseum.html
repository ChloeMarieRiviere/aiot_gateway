<!DOCTYPE html>
<html>
<head>
    <title>Musé Inria exposition</title>
    <link rel="stylesheet" type="text/css" href="InriaMuseum.css"> 
    <script>

        var current_page;
        function handleButtonClick(event) {
            if(event.target.id == ""){
                const parentElementId = event.target.parentElement ? event.target.parentElement.id : 'No parent element';
                changePage(parentElementId);
            }
            else{
                changePage(event.target.id);

            }
        }
        
        function changePage(ElementId) {
            switch (ElementId) {
                case "button_start_fr":
                case "button_start_fr_label":
                    current_page='Launching.svg';
                    break;
                case "button_active": 
                case "button_suite":
                case "button_music1" :
                case "button_music2" :
                case "button_suite_group":
                    defineNextSVG();
                    break;
                case "button_leave":
                case "button_défis-2":
                    current_page='Welcom.svg';
                    break;
                case "button_copyright":
                    current_page='credit.svg';
                    break;
                case "button_défis":
                    current_page='Select_music.svg';
                    break;
                default :
                    console.log(`default ${ElementId} `); 
                    break;
            }
            loadSVG(current_page);
            checkPage();

        }

        function defineNextSVG(){
            switch (current_page) {
                case "Introduction.svg":
                    current_page='Describe_network.svg';
                    break;
                case "Describe_network.svg":
                    current_page='Select_music.svg';
                    break;
                case "Select_music.svg":
                    current_page='Activate_mote.svg';
                    break;
                case "Activate_mote.svg":
                    current_page='Listening.svg';
                    break;
                case "Listening.svg":
                    current_page='Ending_Demonstration.svg';
                    break;
            }               

        }

        function checkPage() {
            if(current_page=="Launching.svg"){
                current_page = "Introduction.svg";
                setTimeout(function(){
    loadSVG(current_page);
}, 5000);
            }
            if(current_page=="Activate_mote.svg"){
                current_page = "Listening.svg";
                setTimeout(function(){
    loadSVG(current_page);
}, 5000);
            }
            if(current_page=="Listening.svg"){
                current_page = "Ending_Demonstration.svg";
                setTimeout(function(){
    loadSVG(current_page);
}, 5000);
               
            }
        }



        function loadSVG(filename) {
            const filePath = `svg/${filename}`;
            console.log(`New page ${filename} `);
            fetch(filePath)
                .then(response => response.text())
                .then(svgContent => {
                    document.getElementById('svgContainer').innerHTML = svgContent;
                    loadelement();

                })
                .catch(error => console.error('Error loading SVG:', error));
        }
        
        window.onload = function() {
            loadSVG('Welcom.svg');
            loadelement();
        }


        function loadelement() {
            console.log('Page loaded, setting up event listeners');
            const ids = ["button_start_fr", "button_start_fr_label", "button_copyright", "button_active","button_suite_group","button_leave", "button_music1", "button_music2","button_défis","button_défis-2"];
            ids.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener("click", handleButtonClick);
                    console.log(`Event listener attached to: ${id}`);
                } else {
                    console.log(`Element with id ${id} not found`);
                }
            });

              if(current_page=="Describe_network.svg"){
                changeColor("blue","xplore_mote");
                changeColor("orange","algorithme_board");
            }


        };

        function changeColor(color,id){
            const element = document.getElementById(id);
                if (element) {
                    element.style.fill = color;
                } else {
                    console.error("Element with ID 'algorithme_mote' not found");
                }
        }
    </script>
</head>


<body>
    <section id="svgContainer" class="doc">
    </section>
</body>
</html>
