<!DOCTYPE html>
<html>
<head>
    <title>Inria Museum</title>
    <link rel="stylesheet" type="text/css" href="InriaMuseum.css"> 
    <script>

        var current_page;
        function handleButtonClick(event) {
            if(event.target.id == ""){
                const parentElementId = event.target.parentElement ? event.target.parentElement.id : 'No parent element';
                changePage(parentElementId);
            }else{
                changePage(event.target.id);
            }
        }
        
        function changePage(ElementId) {
            switch (ElementId) {
                case "button_start_fr":
                case "button_start_fr_label":
                    current_page='launching.svg';
                    break;
                case "button_active": 
                case "button_suite":
                case "button_music1" :
                case "button_music2" :
                case "button_suite_group":
                    defineNextSVG();
                    break;
                case "button_leave":
                case "button_défis-2":
                    current_page='welcome.svg';
                    break;
                case "button_copyright":
                    current_page='credit.svg';
                    break;
                case "button_défis":
                    current_page='select_music.svg';
                    break;
                default :
                    console.log(`default ${ElementId} `); 
                    break;
            }
            loadSVG(current_page);
            checkPage();
        }

        function defineNextSVG(){
            switch (current_page) {
                case "introduction.svg":
                    current_page='describe_network.svg';
                    break;
                case "describe_network.svg":
                    current_page='select_music.svg';
                    break;
                case "select_music.svg":
                    current_page='activate_mote.svg';
                    break;
                case "activate_mote.svg":
                    current_page='listening.svg';
                    break;
                case "listening.svg":
                    current_page='ending_demonstration.svg';
                    break;
            }               
        }

        function checkPage() {
            if(current_page=="launching.svg"){
                current_page = "introduction.svg";
                setTimeout(function(){
    loadSVG(current_page);
}, 5000);
            }
            if(current_page=="activate_mote.svg"){
                current_page = "listening.svg";
                console.log(`time${current_page} `);
                setTimeout(function(){
    loadSVG(current_page);
}, 5000);
            }
            if(current_page=="listening.svg"){
                current_page = "ending_demonstration.svg";
                setTimeout(function(){
    loadSVG(current_page);
}, 5000);        
            }
        }

        function loadSVG(filename) {
            const filePath = `svg/${filename}`;
            console.log(`New page ${filename} `);
            fetch(filePath)
                .then(response => response.text())
                .then(svgContent => {
                    document.getElementById('svgContainer').innerHTML = svgContent;
                    loadelement();
                })
                .catch(error => console.error('Error loading SVG:', error));
        }
        
        window.onload = function() {
            loadSVG('welcome.svg');
            loadelement();
        }

        function loadelement() {
            console.log('Page loaded, setting up event listeners');
            const ids = ["button_start_fr", "button_start_fr_label", "button_copyright", "button_active","button_suite_group","button_leave", "button_music1", "button_music2","button_défis","button_défis-2"];
            ids.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener("click", handleButtonClick);
                    console.log(`Event listener attached to: ${id}`);
                } else {
                    console.log(`Element with id ${id} not found`);
                }
            });
        };

        function changeColor(color,id){
            const element = document.getElementById(id);
            if (element) {
                element.style.fill = color;
            } else {
                console.error("Element with ID 'algorithme_mote' not found");
            }
        }

    </script>
</head>


<body>
    <section id="svgContainer" class="doc">
    </section>
</body>
</html>
